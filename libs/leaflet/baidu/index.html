<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>百度地图加载</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="../leaflet.css"/>
    <script type="text/javascript" src="leaflet.js"></script>
    <script type="text/javascript" src="proj4-compressed.js"></script>
    <script type="text/javascript" src="proj4leaflet.js"></script>
    <style>
        html,
        body,
        #viewDiv {
            padding: 0;
            margin: 0;
            height: 100%;
            width: 100%;
        }
    </style>
    <script src="../../util/coordinateConverter.js"></script>
</head>
<body>
<!-- 地图容器 -->
<div id="viewDiv">
</div>
<script>
    var crs = new L.Proj.CRS('EPSG:900913',
        '+proj=merc +a=6378206 +b=6356584.314245179 +lat_ts=0.0 +lon_0=0.0 +x_0=0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs',
        {
            resolutions: function () {
                level = 19;
                var res = [];
                res[0] = Math.pow(2, 18);
                for (var i = 1; i < level; i++) {
                    res[i] = Math.pow(2, (18 - i))
                }
                return res;
            }(),
            origin: [0,0],
            bounds: L.bounds([20037508.342789244, 0], [0, 20037508.342789244])
        }),
        map = L.map('viewDiv', {
            crs: crs
        });

    new L.TileLayer('http://online{s}.map.bdimg.com/tile/?qt=tile&x={x}&y={y}&z={z}&styles=pl&udt=20150518', {
        maxZoom: 18,
        minZoom: 3,
        subdomains: [0,1,2],
        tms: true
    }).addTo(map);

    map.setView([30.434129,114.423707], 15);

    var point = "12713820.96,3547501.49;12735588.99,3581668.87";
    var points = "12715359.90,3581668.87,12714342.90,3580383.61,12714031.80,3579968.61,12713926.20,3579778.11,12713857.27,3579554.09,12713822.20,3579352.23,12713820.96,3579153.99,12713842.80,3578973.12,12713887.73,3578800.33,12713963.31,3578618.72,12714090.87,3578413.09,12714228.13,3578278.85,12714405.42,3578166.87,12714598.23,3578079.92,12714941.51,3578013.78,12715223.52,3577956.00,12715483.93,3577888.62,12715685.79,3577777.02,12715865.81,3577612.45,12716233.87,3577191.07,12716259.87,3577155.51,12716412.12,3576982.75,12716588.77,3576799.82,12716588.77,3576799.82,12716897.27,3576475.84,12717075.89,3576290.70,12717208.94,3576144.98,12717378.90,3575960.83,12717647.89,3575677.76,12717647.89,3575677.76,12717914.67,3575393.73,12718151.40,3575143.82,12718206.54,3575087.16,12718291.54,3574998.12,12718533.35,3574778.56,12718792.40,3574588.86,12718870.31,3574536.75,12719432.13,3574192.65,12719585.82,3574097.75,12719585.82,3574097.75,12719708.81,3574028.94,12719931.27,3573923.15,12720145.75,3573841.20,12720200.97,3573823.25,12720212.76,3573810.18,12720213.64,3573802.58,12720214.92,3573784.81,12720214.44,3573745.78,12720215.96,3573582.89,12720222.82,3572682.04,12720222.82,3572682.04,12720217.97,3572291.09,12720216.96,3572196.49,12720224.06,3572094.29,12720243.29,3571936.97,12720251.39,3571876.25,12720280.20,3571750.79,12720330.30,3571574.74,12720434.01,3571345.06,12720525.06,3571187.22,12720622.21,3571054.18,12720680.88,3570985.38,12720742.59,3570906.46,12721148.36,3570412.20,12721828.64,3569579.37,12721877.09,3569506.43,12722087.25,3569002.63,12722263.90,3568629.88,12722263.90,3568629.88,12722355.99,3568434.61,12722364.09,3568414.88,12722364.09,3568395.65,12722360.04,3568386.54,12722340.92,3568367.85,12722278.00,3568346.13,12722092.82,3568276.32,12721899.57,3568177.15,12721639.56,3568032.46,12721239.73,3567814.40,12720676.83,3567568.46,12720405.56,3567494.92,12719680.96,3567314.80,12719680.96,3567314.80,12718792.08,3567115.23,12718458.61,3566985.93,12718295.11,3566818.61,12718215.24,3566662.67,12718260.88,3566443.35,12718310.09,3566286.94,12718310.66,3566282.78,12718310.66,3566282.78,12718333.66,3566205.24,12718330.17,3566129.21,12718271.26,3565579.23,12718264.73,3564991.22,12718264.73,3564991.22,12718255.39,3564538.63,12718338.63,3564149.32,12718534.64,3563657.26,12718682.19,3563241.42,12718682.19,3563241.42,12718785.47,3562945.59,12718959.80,3562682.71,12719466.75,3562167.07,12719664.64,3561776.36,12719664.64,3561776.36,12720080.83,3560815.90,12720243.25,3560561.91,12720243.25,3560561.91,12720352.62,3560360.11,12720409.65,3560231.09,12720450.64,3560107.07,12720479.58,3559991.50,12720504.10,3559898.87,12720519.09,3559784.78,12720555.20,3559543.67,12720604.73,3559219.83,12720592.15,3558933.03,12720592.15,3558933.03,12720567.62,3558649.88,12720619.64,3558370.85,12720688.81,3558096.07,12720754.66,3557863.78,12720754.66,3557863.78,12720789.68,3557731.77,12720866.19,3557452.25,12720907.18,3557342.22,12720952.19,3557296.22,12721037.19,3557268.20,12721391.26,3557330.22,12721633.43,3557408.74,12721633.43,3557408.74,12721933.32,3557504.18,12722184.39,3557588.50,12722528.12,3557701.54,12722722.68,3557760.83,12722895.49,3557824.98,12722964.98,3557846.30,12723033.07,3557855.57,12723077.91,3557847.28,12723137.42,3557802.52,12723137.42,3557802.52,12723217.93,3557741.08,12723321.29,3557653.09,12723448.25,3557510.02,12723551.96,3557394.99,12723685.70,3557255.31,12723847.52,3557072.90,12723847.52,3557072.90,12724235.21,3556689.96,12724579.46,3556381.36,12724880.71,3556191.86,12726046.86,3555695.37,12726087.62,3555658.46,12726096.51,3555603.72,12726082.53,3555529.88,12726062.17,3555468.78,12725755.87,3554935.56,12725660.53,3554718.93,12725660.53,3554718.93,12725501.11,3554355.56,12725398.84,3554091.72,12725391.03,3554057.90,12725393.63,3554016.79,12725403.53,3553995.47,12725446.45,3553953.83,12725528.64,3553917.92,12725994.36,3553868.94,12726210.21,3553805.88,12726397.84,3553728.72,12726448.34,3553713.43,12726617.33,3553700.94,12726617.33,3553700.94,12726924.39,3553673.91,12727087.46,3553644.14,12727446.46,3553527.65,12727649.64,3553437.55,12727649.64,3553437.55,12728305.43,3553115.76,12728560.47,3552976.76,12728727.99,3552893.23,12728745.74,3552871.49,12728759.97,3552839.64,12728761.33,3552802.02,12728747.43,3552721.67,12728747.43,3552721.67,12728720.01,3552596.23,12728715.00,3552579.73,12728657.22,3552443.86,12728572.18,3552247.08,12728481.24,3552037.10,12728416.80,3551884.33,12728352.76,3551725.89,12728352.76,3551725.89,12728272.33,3551533.02,12728233.14,3551408.19,12728218.27,3551355.31,12728217.95,3551345.81,12728224.88,3551306.87,12728231.85,3551281.86,12728241.71,3551261.43,12728250.57,3551247.02,12728255.94,3551241.02,12728664.99,3551050.00,12728983.03,3550897.98,12729243.44,3550797.28,12729243.44,3550797.28,12730024.11,3550533.58,12730649.49,3550319.31,12730649.49,3550319.31,12730866.01,3550246.88,12731553.63,3550006.78,12731619.35,3549957.71,12731786.27,3549826.38,12731786.27,3549826.38,12732257.91,3549456.38,12732312.14,3549413.73,12732339.67,3549362.16,12732353.90,3549271.48,12732351.25,3549200.81,12732259.68,3548945.66,12732258.80,3548877.23,12732293.46,3548785.65,12732409.16,3548631.70,12732516.60,3548474.50,12732516.60,3548474.50,12732643.72,3548322.46,12732779.74,3548198.01,12732939.16,3548066.89,12733131.84,3547913.64,12733328.93,3547774.34,12733611.82,3547576.60,12733679.39,3547560.60,12733898.20,3547540.77,12733898.20,3547540.77,12734267.06,3547521.04,12734795.09,3547501.49,12734944.45,3547518.37,12735220.05,3547559.26,12735446.76,3547593.06,12735588.99,3547614.39,12735588.99,3547614.39";

    var p = Mercator2BD09(12713820.96,3547501.49);
    new L.marker([p[1],p[0]]).addTo(map);

    p = Mercator2BD09(12735588.99,3581668.87);
    new L.marker([p[1],p[0]]).addTo(map);

    var ps = points.split(",");
    for (var i = 0; i < ps.length; i = i + 2) {
        p = Mercator2BD09(parseFloat(ps[i]), parseFloat(ps[i + 1]));
        new L.marker([p[1],p[0]]).addTo(map);
    }

</script>
</body>
</html>